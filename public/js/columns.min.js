(function(a,p,q,f){function c(){return a(".column > .selected")}function e(){var d=a("div.breadcrumb").empty();c().each(function(b,c){a("<span/>").text(a(c).text().trim()).appendTo(d)})}function l(a,b){a.animate({scrollLeft:b.offset().left},g.delay)}function m(d){var b=[],c;for(b.push(d.children());b.length;)c=b.shift(),c.children().each(function(c,g){var h=a(this).children(),e=a(this).parent().parent();e.length&&a(this).data("ancestor")===f&&a(this).siblings().addBack().data("ancestor",e);0<h.length&&
(b.push(h),a(this).data("child",h).addClass("parent"));a(this).parent().appendTo(d).addClass("column")})}function k(){a(".column:gt(0)").addClass("collapse")}function h(){k();c().removeClass("selected");e();g.current(f)}function n(d){var b=!1;switch(d.keyCode){case 27:h();break;case 38:c().last().prev().click();b=!0;break;case 40:c().last().next().click();b=!0;break;case 37:d=c().last().data("ancestor");d!==f&&d.click();b=!0;break;case 39:d=c().last().data("child"),d===f?c().last().next().click():
d.children().first().click(),b=!0}b&&0===c().last().length&&a(".column").first().children().first().click()}var g;a.fn.millerColumns=function(c){g=a.extend({current:function(a){return f},breadcrumb:e,animation:l,delay:500},c);return this.each(function(){var b=a(this);m(b);k();b.find("li").on("click",function(c){h();var d=a(this).data("child"),e=a(this);for(d!==f&&d.removeClass("collapse").children().removeClass("selected");e!==f;)e.addClass("selected").parent().removeClass("collapse"),e=e.data("ancestor");
g.animation.call(this,b,a(this));g.breadcrumb.call(this);g.current.call(this,a(this));c.stopPropagation()});b.bind("keypress",n);b.on("click",function(){h()});b.focus()})}})(jQuery);
